# Term-level 쿼리

Term-level 쿼리는 Elasticsearch에서 구조화된 데이터에서 정확한 일치를 검색하기 위해 사용되는 쿼리 유형입니다.

## Term-level 쿼리의 특징

- Term-level 쿼리는 **정확한 값 일치**를 위해 사용됩니다 (숫자, 날짜, 키워드 등).
- 전체 텍스트 쿼리와 달리, 입력 텍스트를 **분석하거나 토큰화하지 않고** 인덱스에서 정확한 값을 찾습니다.
- 주로 **비분석 필드**(keyword, numeric, date, boolean 등)에 사용됩니다.

## 주요 특성

1. **정확한 일치**: Term-level 쿼리는 입력 텍스트를 분석하지 않습니다. 지정된 필드에서 정확한 일치를 찾습니다.

2. **비분석 필드 사용**: 일반적으로 키워드, 정수, 날짜 등과 같이 분석되지 않은 필드에 사용됩니다.

3. **대소문자 구분**: 키워드 필드에 사용될 때 대소문자를 구분합니다.

## 일반적인 Term-level 쿼리 유형

### 1. term 쿼리

단일 값에 대한 정확한 일치를 찾습니다.

```
GET /my_index/_search
{
  "query": {
    "term": {
      "status": "published"
    }
  }
}
```

### 2. terms 쿼리

여러 값 중 하나와 일치하는 문서를 찾습니다(OR 조건).

```
GET /my_index/_search
{
  "query": {
    "terms": {
      "status": ["published", "draft"]
    }
  }
}
```

## 사용 시 주의사항

1. **텍스트 필드에 사용 시 주의**: `text` 타입 필드에 `term` 쿼리를 사용할 경우, 텍스트가 이미 토큰화되어 있기 때문에 예상과 다른 결과가 나올 수 있습니다.

2. **정확한 값 매칭**: Term-level 쿼리는 정확히 인덱스에 저장된 값과 일치해야 합니다. 대소문자, 공백, 특수 문자 등이 모두 동일해야 합니다.

3. **효율적인 필터링**: 스코어링이 필요 없는 경우 `filter` 컨텍스트에서 사용하면 성능이 향상됩니다.

## 실용적인 예시

다음은 `bool` 쿼리와 함께 사용하는 예시입니다:

```
GET /products/_search
{
  "query": {
    "bool": {
      "filter": [
        { "term": { "category": "electronics" }},
        { "range": { "price": { "gte": 100, "lte": 200 }}}
      ]
    }
  }
}
```

이 쿼리는 카테고리가 정확히 "electronics"이고 가격이 100에서 200 사이인 제품을 찾습니다.
